<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FakeShield ‚Äî AI Fake News Detector</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#07090f;--s1:#0d1117;--s2:#111827;--s3:#1a2234;
  --border:#1e2d45;--border2:#253550;
  --cyan:#00e5ff;--green:#00ff88;--red:#ff3d5a;--yellow:#ffd600;
  --text:#e2e8f0;--muted:#64748b;--muted2:#94a3b8;
  --mono:'Space Mono',monospace;--sans:'Syne',sans-serif;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--bg);color:var(--text);font-family:var(--sans);min-height:100vh;overflow-x:hidden;}
body::before{
  content:'';position:fixed;inset:0;
  background-image:linear-gradient(rgba(0,229,255,.025) 1px,transparent 1px),
    linear-gradient(90deg,rgba(0,229,255,.025) 1px,transparent 1px);
  background-size:44px 44px;pointer-events:none;z-index:0;
}
.orb{position:fixed;border-radius:50%;filter:blur(130px);pointer-events:none;z-index:0;}
.orb-a{width:700px;height:700px;background:rgba(0,229,255,.035);top:-250px;right:-150px;}
.orb-b{width:500px;height:500px;background:rgba(255,61,90,.03);bottom:-100px;left:-150px;}

header{
  position:relative;z-index:20;padding:18px 44px;
  display:flex;align-items:center;justify-content:space-between;
  border-bottom:1px solid var(--border);
  backdrop-filter:blur(16px);background:rgba(7,9,15,.85);
}
.logo{display:flex;align-items:center;gap:10px;font-weight:800;font-size:21px;letter-spacing:-0.5px;text-decoration:none;color:var(--text);}
.logo-box{width:34px;height:34px;background:linear-gradient(135deg,var(--cyan),#0070f3);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:17px;}
nav{display:flex;align-items:center;gap:4px;}
nav a{padding:7px 16px;border-radius:8px;color:var(--muted2);text-decoration:none;font-size:13px;font-weight:600;letter-spacing:.3px;transition:all .2s;}
nav a:hover{background:rgba(255,255,255,.05);color:var(--text);}
nav a.active{background:rgba(0,229,255,.1);color:var(--cyan);}

main{position:relative;z-index:1;max-width:820px;margin:0 auto;padding:56px 24px 100px;}

.hero{text-align:center;margin-bottom:48px;animation:su .6s ease both;}
.pill{display:inline-flex;align-items:center;gap:7px;padding:5px 16px;margin-bottom:22px;background:rgba(0,229,255,.07);border:1px solid rgba(0,229,255,.18);border-radius:100px;font-family:var(--mono);font-size:10px;color:var(--cyan);letter-spacing:1.2px;text-transform:uppercase;}
.dot{width:6px;height:6px;border-radius:50%;background:var(--cyan);animation:blink 1.8s infinite;}
h1{font-size:clamp(32px,6vw,58px);font-weight:800;line-height:1.06;letter-spacing:-2px;margin-bottom:14px;}
.grad{background:linear-gradient(120deg,var(--cyan) 0%,#0077ff 45%,var(--green) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.hero p{color:var(--muted2);font-size:15px;line-height:1.65;max-width:480px;margin:0 auto;}

.input-card{background:var(--s1);border:1px solid var(--border);border-radius:18px;padding:28px;animation:su .6s .1s ease both;}
.row-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;}
.tag{font-family:var(--mono);font-size:10px;color:var(--muted);letter-spacing:1.5px;text-transform:uppercase;}
.wc{font-family:var(--mono);font-size:10px;color:var(--muted);}
textarea{width:100%;min-height:160px;background:var(--s2);border:1px solid var(--border);border-radius:12px;color:var(--text);font-family:var(--sans);font-size:14.5px;line-height:1.72;padding:15px 18px;resize:vertical;outline:none;transition:border-color .2s,box-shadow .2s;}
textarea:focus{border-color:rgba(0,229,255,.4);box-shadow:0 0 0 3px rgba(0,229,255,.06);}
textarea::placeholder{color:var(--muted);}
.examples{display:flex;flex-wrap:wrap;gap:7px;margin-top:12px;align-items:center;}
.ex-label{font-family:var(--mono);font-size:10px;color:var(--muted);letter-spacing:.5px;}
.ex-btn{padding:4px 12px;background:transparent;border:1px solid var(--border);border-radius:100px;color:var(--muted2);font-family:var(--mono);font-size:10px;cursor:pointer;letter-spacing:.3px;transition:all .2s;}
.ex-btn:hover{border-color:var(--cyan);color:var(--cyan);background:rgba(0,229,255,.05);}
.btn-analyze{width:100%;margin-top:18px;padding:15px;background:linear-gradient(135deg,var(--cyan),#0070f3);border:none;border-radius:12px;color:#000;font-family:var(--sans);font-size:14.5px;font-weight:700;letter-spacing:.4px;cursor:pointer;transition:all .2s;}
.btn-analyze:hover{transform:translateY(-2px);box-shadow:0 10px 32px rgba(0,229,255,.28);}
.btn-analyze:active{transform:translateY(0);}
.btn-analyze.loading{pointer-events:none;background:var(--s2);color:var(--muted);}
.spin{display:inline-block;width:14px;height:14px;border:2px solid var(--muted);border-top-color:var(--cyan);border-radius:50%;animation:rotate .65s linear infinite;margin-right:8px;vertical-align:middle;}

/* ‚îÄ‚îÄ Result ‚îÄ‚îÄ */
#result{margin-top:28px;}
.result-wrap{animation:su .4s ease both;}

/* Verdict banner */
.verdict-banner{
  border-radius:16px;padding:28px 28px 24px;
  display:flex;align-items:center;justify-content:space-between;
  gap:20px;margin-bottom:18px;
  border:1px solid var(--border2);
}
.verdict-banner.fake{background:linear-gradient(135deg,rgba(255,61,90,.08),rgba(255,61,90,.03));}
.verdict-banner.real{background:linear-gradient(135deg,rgba(0,255,136,.08),rgba(0,255,136,.03));}
.vb-left{display:flex;align-items:center;gap:16px;}
.vb-icon{width:56px;height:56px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:28px;flex-shrink:0;}
.vb-icon.fake{background:rgba(255,61,90,.12);}
.vb-icon.real{background:rgba(0,255,136,.12);}
.vb-sub{font-family:var(--mono);font-size:10px;color:var(--muted);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:4px;}
.vb-label{font-size:28px;font-weight:800;letter-spacing:-1px;}
.vb-label.fake{color:var(--red);}
.vb-label.real{color:var(--green);}
.vb-model{font-family:var(--mono);font-size:10px;color:var(--muted);margin-top:4px;}
.vb-conf{text-align:right;flex-shrink:0;}
.vb-conf-num{font-family:var(--mono);font-size:38px;font-weight:700;line-height:1;}
.vb-conf-num.fake{color:var(--red);}
.vb-conf-num.real{color:var(--green);}
.vb-conf-lbl{font-family:var(--mono);font-size:9px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;}

/* Gauge row */
.gauge-row{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:18px;}
.gauge-card{background:var(--s1);border:1px solid var(--border);border-radius:14px;padding:22px;text-align:center;}
.gc-title{font-family:var(--mono);font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:14px;}

/* Ring */
.ring-wrap{position:relative;width:130px;height:130px;margin:0 auto 14px;}
.ring-wrap svg{transform:rotate(-90deg);}
.ring-bg{fill:none;stroke:var(--s3);stroke-width:10;}
.ring-fill{fill:none;stroke-width:10;stroke-linecap:round;stroke-dasharray:326.73;stroke-dashoffset:326.73;transition:stroke-dashoffset 1.1s cubic-bezier(.16,1,.3,1);}
.ring-fill.fake{stroke:var(--red);}
.ring-fill.real{stroke:var(--green);}
.ring-center{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;}
.ring-pct{font-family:var(--mono);font-size:26px;font-weight:700;line-height:1;}
.ring-pct.fake{color:var(--red);}
.ring-pct.real{color:var(--green);}
.ring-sub{font-family:var(--mono);font-size:8px;color:var(--muted);letter-spacing:1px;margin-top:2px;}
.gc-name{font-size:14px;font-weight:700;}
.gc-name.fake{color:var(--red);}
.gc-name.real{color:var(--green);}

/* NLP signals */
.nlp-card{background:var(--s1);border:1px solid var(--border);border-radius:14px;padding:22px;margin-bottom:18px;}
.sec-hdr{font-family:var(--mono);font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:16px;}
.signals-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;}
.sig-row{display:flex;flex-direction:column;gap:5px;}
.sig-top{display:flex;align-items:center;justify-content:space-between;}
.sig-name{font-size:12px;color:var(--muted2);}
.sig-val{font-family:var(--mono);font-size:11px;font-weight:700;}
.sig-track{height:4px;background:var(--s3);border-radius:100px;overflow:hidden;}
.sig-fill{height:100%;border-radius:100px;transition:width 1s cubic-bezier(.16,1,.3,1);}

/* Chips */
.chips-row{display:flex;flex-wrap:wrap;gap:7px;margin-top:14px;}
.chip{padding:4px 10px;border-radius:100px;font-family:var(--mono);font-size:9px;letter-spacing:.4px;}
.chip-cb{background:rgba(255,214,0,.08);border:1px solid rgba(255,214,0,.18);color:var(--yellow);}
.chip-bad{background:rgba(255,61,90,.08);border:1px solid rgba(255,61,90,.18);color:var(--red);}
.chip-good{background:rgba(0,255,136,.08);border:1px solid rgba(0,255,136,.18);color:var(--green);}
.chip-neutral{background:rgba(148,163,184,.07);border:1px solid rgba(148,163,184,.15);color:var(--muted2);}

/* Stats */
.stats-bar{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:32px;animation:su .6s .2s ease both;}
.stat-box{background:var(--s1);border:1px solid var(--border);border-radius:12px;padding:20px;text-align:center;}
.stat-val{font-family:var(--mono);font-size:24px;font-weight:700;color:var(--cyan);line-height:1;margin-bottom:5px;}
.stat-lbl{font-size:11px;color:var(--muted);}

.err{padding:14px 18px;margin-top:14px;background:rgba(255,61,90,.07);border:1px solid rgba(255,61,90,.2);border-radius:10px;color:var(--red);font-size:13px;}

@keyframes su{from{opacity:0;transform:translateY(18px);}to{opacity:1;transform:translateY(0);}}
@keyframes rotate{to{transform:rotate(360deg);}}
@keyframes blink{0%,100%{opacity:1;}50%{opacity:.25;}}

@media(max-width:600px){
  header{padding:16px 18px;}
  main{padding:36px 16px 80px;}
  .gauge-row{grid-template-columns:1fr;}
  .signals-grid{grid-template-columns:1fr;}
  .stats-bar{grid-template-columns:1fr;}
  .verdict-banner{flex-direction:column;align-items:flex-start;}
}
</style>
</head>
<body>
<div class="orb orb-a"></div>
<div class="orb orb-b"></div>

<header>
  <a class="logo" href="/"><div class="logo-box">üõ°</div>FakeShield</a>
  <nav>
    <a href="/" class="active">Detector</a>
    <a href="/compare">Model Comparison</a>
  </nav>
</header>

<main>
  <div class="hero">
    <div class="pill"><span class="dot"></span>AI-Powered Verification</div>
    <h1>How <span class="grad">Fake</span> Is<br>This News?</h1>
    <p>Paste any headline or article ‚Äî get an instant fakeness percentage powered by the best-performing ML model + 15 NLP signals.</p>
  </div>

  <div class="input-card">
    <div class="row-top">
      <span class="tag">// Paste Article or Headline</span>
      <span class="wc" id="wc">0 words</span>
    </div>
    <textarea id="txt" rows="6"
      placeholder="Paste any news headline or article text here‚Ä¶&#10;&#10;e.g. 'The Federal Reserve raised interest rates citing inflation‚Ä¶'  or  'SHOCKING: Scientists ADMIT vaccines cause damage ‚Äî Big Pharma EXPOSED!!'"></textarea>
    <div class="examples">
      <span class="ex-label">Try:</span>
      <button class="ex-btn" onclick="load('real')">üì∞ Real News</button>
      <button class="ex-btn" onclick="load('fake')">üö® Fake News</button>
      <button class="ex-btn" onclick="clearAll()">‚úï Clear</button>
    </div>
    <button class="btn-analyze" id="btn" onclick="analyze()">
      üîç &nbsp;Analyze ‚Äî Get Fake % Score
    </button>
  </div>

  <div id="result"></div>

  <div class="stats-bar">
    <div class="stat-box"><div class="stat-val">4</div><div class="stat-lbl">ML Models Trained</div></div>
    <div class="stat-box"><div class="stat-val" id="sv-acc">‚Äî</div><div class="stat-lbl">Best Model Accuracy</div></div>
    <div class="stat-box"><div class="stat-val" id="sv-model">‚Äî</div><div class="stat-lbl">Active Model</div></div>
  </div>
</main>

<script>
const SAMPLES = {
  real: `The Federal Reserve raised interest rates by 25 basis points on Wednesday, citing persistent inflation in core goods. Federal Reserve Chair Jerome Powell stated that policymakers remain committed to bringing inflation down to the 2 percent target. According to Bureau of Labor Statistics data, unemployment held steady at 3.7 percent while core PCE inflation declined to 3.2 percent in October, slightly above analyst forecasts of 3.0 percent.`,
  fake: `SHOCKING: Scientists at Johns Hopkins were silenced after discovering that common vaccines cause neurological damage in adults. The Federal Reserve is secretly planning to eliminate cash and force all citizens onto a surveillance-based digital currency system. Insiders confirm that the unemployment data is completely fabricated ‚Äî the real rate is 25 percent. Share this before they delete it. The media will not cover this truth. Do your own research.`
};

const txt = document.getElementById('txt');
txt.addEventListener('input', () => {
  const w = txt.value.trim().split(/\s+/).filter(Boolean).length;
  document.getElementById('wc').textContent = `${w} word${w!==1?'s':''}`;
});

function load(t){ txt.value = SAMPLES[t]; txt.dispatchEvent(new Event('input')); }
function clearAll(){ txt.value=''; txt.dispatchEvent(new Event('input')); document.getElementById('result').innerHTML=''; }

async function analyze(){
  const text = txt.value.trim();
  if(!text) return;
  const btn = document.getElementById('btn');
  btn.classList.add('loading');
  btn.innerHTML = '<span class="spin"></span> Analyzing‚Ä¶';
  try {
    const r = await fetch('/api/predict',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({text})});
    const d = await r.json();
    if(d.error){ showErr(d.error); return; }
    render(d);
  } catch(e){
    showErr('Cannot connect. Make sure Flask is running: python backend/app.py');
  } finally {
    btn.classList.remove('loading');
    btn.innerHTML = 'üîç &nbsp;Analyze ‚Äî Get Fake % Score';
  }
}

const CIRC = 326.73; // 2œÄ √ó 52
function ringOff(p){ return CIRC - (p/100)*CIRC; }

function sigColor(v){ return v>=70?'color:var(--red)':v>=40?'color:var(--yellow)':'color:var(--green)'; }
function sigBg(v){    return v>=70?'background:var(--red)':v>=40?'background:var(--yellow)':'background:var(--green)'; }

function render(d){
  const isFake = d.label==='Fake';
  const cls    = isFake?'fake':'real';
  const icon   = isFake?'üö®':'‚úÖ';

  // Verdict banner
  const banner = `
  <div class="verdict-banner ${cls}">
    <div class="vb-left">
      <div class="vb-icon ${cls}">${icon}</div>
      <div>
        <div class="vb-sub">Verdict</div>
        <div class="vb-label ${cls}">${d.label} News</div>
        <div class="vb-model">Model: ${d.best_model}</div>
      </div>
    </div>
    <div class="vb-conf">
      <div class="vb-conf-num ${cls}">${d.confidence}%</div>
      <div class="vb-conf-lbl">Confidence</div>
    </div>
  </div>`;

  // Gauge cards
  const gauges = `
  <div class="gauge-row">
    <div class="gauge-card">
      <div class="gc-title">Fakeness Score</div>
      <div class="ring-wrap">
        <svg width="130" height="130" viewBox="0 0 130 130">
          <circle class="ring-bg" cx="65" cy="65" r="52"/>
          <circle class="ring-fill fake" id="rFake" cx="65" cy="65" r="52"/>
        </svg>
        <div class="ring-center">
          <div class="ring-pct fake" id="rFakeTxt">0%</div>
          <div class="ring-sub">FAKE</div>
        </div>
      </div>
      <div class="gc-name fake">${d.fake_pct}% Fake</div>
    </div>
    <div class="gauge-card">
      <div class="gc-title">Realness Score</div>
      <div class="ring-wrap">
        <svg width="130" height="130" viewBox="0 0 130 130">
          <circle class="ring-bg" cx="65" cy="65" r="52"/>
          <circle class="ring-fill real" id="rReal" cx="65" cy="65" r="52"/>
        </svg>
        <div class="ring-center">
          <div class="ring-pct real" id="rRealTxt">0%</div>
          <div class="ring-sub">REAL</div>
        </div>
      </div>
      <div class="gc-name real">${d.real_pct}% Real</div>
    </div>
  </div>`;

  // NLP signals
  const nlp = d.nlp;
  const sigs = Object.entries(nlp.signals).map(([k,v])=>`
    <div class="sig-row">
      <div class="sig-top">
        <span class="sig-name">${k}</span>
        <span class="sig-val" style="${sigColor(v)}">${v}%</span>
      </div>
      <div class="sig-track">
        <div class="sig-fill" data-w="${v}%" style="width:0%;${sigBg(v)}"></div>
      </div>
    </div>`).join('');

  let chips = '';
  nlp.clickbait_keywords.forEach(kw => chips+=`<span class="chip chip-cb">‚ö† ${kw}</span>`);
  nlp.caps_words.slice(0,4).forEach(w  => chips+=`<span class="chip chip-bad">${w}</span>`);
  if(nlp.has_numbers) chips+=`<span class="chip chip-good">‚úì Numbers cited</span>`;
  if(nlp.has_quotes)  chips+=`<span class="chip chip-good">‚úì Quoted sources</span>`;
  chips+=`<span class="chip chip-neutral">${nlp.word_count} words</span>`;
  chips+=`<span class="chip chip-neutral">Subjectivity ${nlp.subjectivity_pct}%</span>`;
  chips+=`<span class="chip chip-neutral">Lex.Div ${nlp.lexical_diversity}%</span>`;

  const nlpCard = `
  <div class="nlp-card">
    <div class="sec-hdr">// NLP Signal Breakdown ‚Äî fake-likelihood per signal</div>
    <div class="signals-grid">${sigs}</div>
    <div class="chips-row">${chips}</div>
  </div>`;

  document.getElementById('result').innerHTML = `
    <div class="result-wrap">${banner}${gauges}${nlpCard}</div>`;

  // Animate rings
  setTimeout(()=>{
    document.getElementById('rFake').style.strokeDashoffset = ringOff(d.fake_pct);
    document.getElementById('rReal').style.strokeDashoffset = ringOff(d.real_pct);
    animNum('rFakeTxt', d.fake_pct, 1100);
    animNum('rRealTxt', d.real_pct, 1100);
    document.querySelectorAll('[data-w]').forEach(el => el.style.width = el.dataset.w);
  }, 60);
}

function animNum(id, to, dur){
  const el = document.getElementById(id);
  if(!el) return;
  const start = performance.now();
  (function step(now){
    const t = Math.min((now-start)/dur,1);
    const e = 1-Math.pow(1-t,3);
    el.textContent = (to*e).toFixed(1)+'%';
    if(t<1) requestAnimationFrame(step);
    else el.textContent = to.toFixed(2)+'%';
  })(start);
}

function showErr(msg){
  document.getElementById('result').innerHTML=`<div class="err">‚ö† ${msg}</div>`;
}

fetch('/api/model_info').then(r=>r.json()).then(d=>{
  if(d.ready){
    document.getElementById('sv-acc').textContent   = d.best_acc+'%';
    document.getElementById('sv-model').textContent = d.best_model.split(' ')[0];
  }
}).catch(()=>{});

document.getElementById('txt').addEventListener('keydown',e=>{
  if(e.ctrlKey && e.key==='Enter') analyze();
});
</script>
</body>
</html>